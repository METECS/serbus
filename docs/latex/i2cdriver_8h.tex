\hypertarget{i2cdriver_8h}{}\section{include/i2cdriver.h File Reference}
\label{i2cdriver_8h}\index{include/i2cdriver.\+h@{include/i2cdriver.\+h}}


A basic driver for controlling Linux I2\+C interfaces.  


{\ttfamily \#include $<$stdint.\+h$>$}\\*
Include dependency graph for i2cdriver.\+h\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=175pt]{i2cdriver_8h__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{i2cdriver_8h_a5df2435ff8cec2b6de06a473cf427864}{I2\+C\+\_\+open} (uint8\+\_\+t bus)
\begin{DoxyCompactList}\small\item\em Opens the /dev/i2c-\/\mbox{[}bus\mbox{]} interface. \end{DoxyCompactList}\item 
void \hyperlink{i2cdriver_8h_a097ccdcc5540327f0df6118700a68364}{I2\+C\+\_\+close} (int i2c\+\_\+fd)
\begin{DoxyCompactList}\small\item\em Closes the given I2\+C interface. \end{DoxyCompactList}\item 
int \hyperlink{i2cdriver_8h_abc7c776c69df4882cb483e30eb4404d0}{I2\+C\+\_\+enable10\+Bit\+Addressing} (int i2c\+\_\+fd)
\begin{DoxyCompactList}\small\item\em Enables 10-\/bit addressing the given I2\+C interface. \end{DoxyCompactList}\item 
int \hyperlink{i2cdriver_8h_a1d2c05b3127b4520cc09ee3b80709a8c}{I2\+C\+\_\+disable10\+Bit\+Addressing} (int i2c\+\_\+fd)
\begin{DoxyCompactList}\small\item\em Disables 10-\/bit addressing the given I2\+C interface. \end{DoxyCompactList}\item 
int \hyperlink{i2cdriver_8h_aa78b1a1354344e7010843cffe962df89}{I2\+C\+\_\+set\+Slave\+Address} (int i2c\+\_\+fd, int addr)
\begin{DoxyCompactList}\small\item\em Sets the I2\+C slave address to communicate with. \end{DoxyCompactList}\item 
int \hyperlink{i2cdriver_8h_ac9c2d06e7ea0e9c01a840841743b27c5}{I2\+C\+\_\+read} (int i2c\+\_\+fd, void $\ast$rx\+\_\+buffer, int n\+\_\+bytes)
\begin{DoxyCompactList}\small\item\em Reads a block from the given I2\+C interface. \end{DoxyCompactList}\item 
int \hyperlink{i2cdriver_8h_a4fb00c476124be12a5484290051cc465}{I2\+C\+\_\+read\+Transaction} (int i2c\+\_\+fd, uint8\+\_\+t byte, void $\ast$rx\+\_\+buffer, int n\+\_\+bytes)
\begin{DoxyCompactList}\small\item\em Writes the given command then reads a block from the given I2\+C interface. \end{DoxyCompactList}\item 
int \hyperlink{i2cdriver_8h_a4889f4597892b63190e1d9e4dd4bb209}{I2\+C\+\_\+write} (int i2c\+\_\+fd, void $\ast$tx\+\_\+buffer, int n\+\_\+bytes)
\begin{DoxyCompactList}\small\item\em Writes a block to the given I2\+C interface. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
A basic driver for controlling Linux I2\+C interfaces. 

\begin{DoxyAuthor}{Author}
Alex Hiam -\/ \href{mailto:alex@graycat.io}{\tt alex@graycat.\+io}
\end{DoxyAuthor}
Requires an I2\+C Kernel driver be loaded to expose /dev/i2c-\/\+N interfaces which provide the standard Linux I2\+C ioctls. This driver is really just an ioctl wrapper. 

\subsection{Function Documentation}
\hypertarget{i2cdriver_8h_a097ccdcc5540327f0df6118700a68364}{}\index{i2cdriver.\+h@{i2cdriver.\+h}!I2\+C\+\_\+close@{I2\+C\+\_\+close}}
\index{I2\+C\+\_\+close@{I2\+C\+\_\+close}!i2cdriver.\+h@{i2cdriver.\+h}}
\subsubsection[{I2\+C\+\_\+close}]{\setlength{\rightskip}{0pt plus 5cm}void I2\+C\+\_\+close (
\begin{DoxyParamCaption}
\item[{int}]{i2c\+\_\+fd}
\end{DoxyParamCaption}
)}\label{i2cdriver_8h_a097ccdcc5540327f0df6118700a68364}


Closes the given I2\+C interface. 


\begin{DoxyParams}{Parameters}
{\em i2c\+\_\+fd} & I2\+C bus file descriptor to close \\
\hline
\end{DoxyParams}
\hypertarget{i2cdriver_8h_a1d2c05b3127b4520cc09ee3b80709a8c}{}\index{i2cdriver.\+h@{i2cdriver.\+h}!I2\+C\+\_\+disable10\+Bit\+Addressing@{I2\+C\+\_\+disable10\+Bit\+Addressing}}
\index{I2\+C\+\_\+disable10\+Bit\+Addressing@{I2\+C\+\_\+disable10\+Bit\+Addressing}!i2cdriver.\+h@{i2cdriver.\+h}}
\subsubsection[{I2\+C\+\_\+disable10\+Bit\+Addressing}]{\setlength{\rightskip}{0pt plus 5cm}int I2\+C\+\_\+disable10\+Bit\+Addressing (
\begin{DoxyParamCaption}
\item[{int}]{i2c\+\_\+fd}
\end{DoxyParamCaption}
)}\label{i2cdriver_8h_a1d2c05b3127b4520cc09ee3b80709a8c}


Disables 10-\/bit addressing the given I2\+C interface. 


\begin{DoxyParams}{Parameters}
{\em i2c\+\_\+fd} & I2\+C file descriptor\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns 0 if successful, ioctl error code otherwise 
\end{DoxyReturn}
\hypertarget{i2cdriver_8h_abc7c776c69df4882cb483e30eb4404d0}{}\index{i2cdriver.\+h@{i2cdriver.\+h}!I2\+C\+\_\+enable10\+Bit\+Addressing@{I2\+C\+\_\+enable10\+Bit\+Addressing}}
\index{I2\+C\+\_\+enable10\+Bit\+Addressing@{I2\+C\+\_\+enable10\+Bit\+Addressing}!i2cdriver.\+h@{i2cdriver.\+h}}
\subsubsection[{I2\+C\+\_\+enable10\+Bit\+Addressing}]{\setlength{\rightskip}{0pt plus 5cm}int I2\+C\+\_\+enable10\+Bit\+Addressing (
\begin{DoxyParamCaption}
\item[{int}]{i2c\+\_\+fd}
\end{DoxyParamCaption}
)}\label{i2cdriver_8h_abc7c776c69df4882cb483e30eb4404d0}


Enables 10-\/bit addressing the given I2\+C interface. 


\begin{DoxyParams}{Parameters}
{\em i2c\+\_\+fd} & I2\+C file descriptor\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns 0 if successful, ioctl error code otherwise 
\end{DoxyReturn}
\hypertarget{i2cdriver_8h_a5df2435ff8cec2b6de06a473cf427864}{}\index{i2cdriver.\+h@{i2cdriver.\+h}!I2\+C\+\_\+open@{I2\+C\+\_\+open}}
\index{I2\+C\+\_\+open@{I2\+C\+\_\+open}!i2cdriver.\+h@{i2cdriver.\+h}}
\subsubsection[{I2\+C\+\_\+open}]{\setlength{\rightskip}{0pt plus 5cm}int I2\+C\+\_\+open (
\begin{DoxyParamCaption}
\item[{uint8\+\_\+t}]{bus}
\end{DoxyParamCaption}
)}\label{i2cdriver_8h_a5df2435ff8cec2b6de06a473cf427864}


Opens the /dev/i2c-\/\mbox{[}bus\mbox{]} interface. 


\begin{DoxyParams}{Parameters}
{\em bus} & I2\+C bus number\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns the file descriptor for the I2\+C bus. 
\end{DoxyReturn}
\hypertarget{i2cdriver_8h_ac9c2d06e7ea0e9c01a840841743b27c5}{}\index{i2cdriver.\+h@{i2cdriver.\+h}!I2\+C\+\_\+read@{I2\+C\+\_\+read}}
\index{I2\+C\+\_\+read@{I2\+C\+\_\+read}!i2cdriver.\+h@{i2cdriver.\+h}}
\subsubsection[{I2\+C\+\_\+read}]{\setlength{\rightskip}{0pt plus 5cm}int I2\+C\+\_\+read (
\begin{DoxyParamCaption}
\item[{int}]{i2c\+\_\+fd, }
\item[{void $\ast$}]{rx\+\_\+buffer, }
\item[{int}]{n\+\_\+bytes}
\end{DoxyParamCaption}
)}\label{i2cdriver_8h_ac9c2d06e7ea0e9c01a840841743b27c5}


Reads a block from the given I2\+C interface. 

Reads {\ttfamily n\+\_\+bytes} from the current slave address on the given I2\+C interface. and puts them into the given buffer.


\begin{DoxyParams}{Parameters}
{\em i2c\+\_\+fd} & I2\+C file descriptor \\
\hline
{\em rx\+\_\+buffer} & pointer to an array, already initialized to the required size \\
\hline
{\em n\+\_\+bytes} & the number of bytes to read into rx\+\_\+buffer\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns 0 if successful, file access error code otherwise 
\end{DoxyReturn}
\hypertarget{i2cdriver_8h_a4fb00c476124be12a5484290051cc465}{}\index{i2cdriver.\+h@{i2cdriver.\+h}!I2\+C\+\_\+read\+Transaction@{I2\+C\+\_\+read\+Transaction}}
\index{I2\+C\+\_\+read\+Transaction@{I2\+C\+\_\+read\+Transaction}!i2cdriver.\+h@{i2cdriver.\+h}}
\subsubsection[{I2\+C\+\_\+read\+Transaction}]{\setlength{\rightskip}{0pt plus 5cm}int I2\+C\+\_\+read\+Transaction (
\begin{DoxyParamCaption}
\item[{int}]{i2c\+\_\+fd, }
\item[{uint8\+\_\+t}]{byte, }
\item[{void $\ast$}]{rx\+\_\+buffer, }
\item[{int}]{n\+\_\+bytes}
\end{DoxyParamCaption}
)}\label{i2cdriver_8h_a4fb00c476124be12a5484290051cc465}


Writes the given command then reads a block from the given I2\+C interface. 

Writes the given byte, then immediately reads n\+\_\+bytes bytes from the current slave address on the given I2\+C interface. Useful for things like reading register values from memory mapped devices.


\begin{DoxyParams}{Parameters}
{\em i2c\+\_\+fd} & I2\+C file descriptor \\
\hline
{\em byte} & the byte to write before reading \\
\hline
{\em rx\+\_\+buffer} & pointer to an array, already initialized to the required size \\
\hline
{\em n\+\_\+bytes} & the number of bytes to read into rx\+\_\+buffer\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns 0 if successful, file access error code otherwise 
\end{DoxyReturn}
\hypertarget{i2cdriver_8h_aa78b1a1354344e7010843cffe962df89}{}\index{i2cdriver.\+h@{i2cdriver.\+h}!I2\+C\+\_\+set\+Slave\+Address@{I2\+C\+\_\+set\+Slave\+Address}}
\index{I2\+C\+\_\+set\+Slave\+Address@{I2\+C\+\_\+set\+Slave\+Address}!i2cdriver.\+h@{i2cdriver.\+h}}
\subsubsection[{I2\+C\+\_\+set\+Slave\+Address}]{\setlength{\rightskip}{0pt plus 5cm}int I2\+C\+\_\+set\+Slave\+Address (
\begin{DoxyParamCaption}
\item[{int}]{i2c\+\_\+fd, }
\item[{int}]{addr}
\end{DoxyParamCaption}
)}\label{i2cdriver_8h_aa78b1a1354344e7010843cffe962df89}


Sets the I2\+C slave address to communicate with. 

Sets the I2\+C slave address that\textquotesingle{}s sent with all subsequent I2\+C transactions on the given I2\+C bus, until I2\+C\+\_\+set\+Slave\+Address is called again with a new address.


\begin{DoxyParams}{Parameters}
{\em i2c\+\_\+fd} & I2\+C file descriptor \\
\hline
{\em addr} & the 7-\/ or 10-\/bit address of the slave device\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns 0 if successful, ioctl error code otherwise 
\end{DoxyReturn}
\hypertarget{i2cdriver_8h_a4889f4597892b63190e1d9e4dd4bb209}{}\index{i2cdriver.\+h@{i2cdriver.\+h}!I2\+C\+\_\+write@{I2\+C\+\_\+write}}
\index{I2\+C\+\_\+write@{I2\+C\+\_\+write}!i2cdriver.\+h@{i2cdriver.\+h}}
\subsubsection[{I2\+C\+\_\+write}]{\setlength{\rightskip}{0pt plus 5cm}int I2\+C\+\_\+write (
\begin{DoxyParamCaption}
\item[{int}]{i2c\+\_\+fd, }
\item[{void $\ast$}]{tx\+\_\+buffer, }
\item[{int}]{n\+\_\+bytes}
\end{DoxyParamCaption}
)}\label{i2cdriver_8h_a4889f4597892b63190e1d9e4dd4bb209}


Writes a block to the given I2\+C interface. 

Writes n\+\_\+bytes bytes from the given buffer to the current slave address on the given I2\+C interface.


\begin{DoxyParams}{Parameters}
{\em i2c\+\_\+fd} & I2\+C file descriptor \\
\hline
{\em tx\+\_\+buffer} & pointer to an array containing the words to be transmitted \\
\hline
{\em n\+\_\+bytes} & the number of bytes to write from tx\+\_\+buffer\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns 0 if successful, file access error code otherwise 
\end{DoxyReturn}
